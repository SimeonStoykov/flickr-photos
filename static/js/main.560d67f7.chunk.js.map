{"version":3,"sources":["images/flickr-loading.svg","config.js","photo/PhotoActions.js","photo/PhotoReducer.js","app/store.js","photo/PhotoSearchBar.js","app/history.js","header/Header.js","photo/Photo.js","loading/Loading.js","photo/PhotoList.js","app/App.js","index.js","app/routes.js"],"names":["module","exports","__webpack_require__","p","config","flickrURL","flickrSearchPhotosURL","concat","resultsPerPage","fetchPhotos","params","currentPage","searchTerm","textParam","currentUnixTimestamp","Math","round","Date","getTime","fetchUrl","loadMorePhotos","dispatch","type","fetchPhotosBegin","fetch","then","handleErrors","res","json","payload","_ref","photosResp","catch","error","fetchPhotosFailure","response","ok","Error","statusText","setCurrentPage","value","initialState","fromJS","searchInputValue","totalPages","fetchPhotosLoading","fetchPhotosError","photos","reducers","combineReducers","photosData","state","arguments","length","undefined","action","get","set","fetchedPhotos","photo","pages","map","src","farm","server","id","secret","currentPhotos","toJS","_loop","i","fetchedPhoto","find","push","Object","toConsumableArray","store","createStore","applyMiddleware","thunk","PhotoSearchBar","_Component","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","searchPhotos","bind","assertThisInitialized","handleSearchInputValueChange","handleKeyPress","inherits","createClass","key","e","props","setSearchInputValue","target","_this$props","setSearchTerm","newSearchTerm","trim","react_default","a","createElement","className","onChange","onKeyPress","placeholder","onClick","disabled","Component","connect","dataUrl","createBrowserHistory","HOME_PATH","Header","currentPath","history","window","location","reload","photo_PhotoSearchBar","Photo","data","linkToOriginalPhoto","owner","linkToAuthorPage","shownTitle","title","substr","fullDescription","description","_content","shownDescription","allTags","tags","split","shownTagsAsText","slice","join","href","rel","alt","ownername","Loading","loading","PhotoList","onscroll","innerHeight","document","documentElement","scrollTop","offsetHeight","_this$props2","_this$props3","lib_default","height","photo_Photo","src_loading_Loading","message","App","src_header_Header","pathname","photo_PhotoList","ReactDOM","render","es","Router","basename","process","Switch","Route","exact","path","component","getElementById"],"mappings":"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","file":"static/js/main.560d67f7.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/flickr-loading.6bbf9220.svg\";","const API_KEY = 'a6daa1a6c8345eff867cc2ef240aa832';\r\n\r\nexport const config = {\r\n    flickrURL: 'https://www.flickr.com',\r\n    flickrSearchPhotosURL: `https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=${API_KEY}`,\r\n    resultsPerPage: 16\r\n};","import { config } from '../config';\r\nexport const FETCH_PHOTOS_BEGIN = 'FETCH_PHOTOS_BEGIN';\r\nexport const FETCH_PHOTOS_SUCCESS = 'FETCH_PHOTOS_SUCCESS';\r\nexport const FETCH_PHOTOS_FAILURE = 'FETCH_PHOTOS_FAILURE';\r\nexport const SET_SEARCH_INPUT_VALUE = 'SET_SEARCH_INPUT_VALUE';\r\nexport const SET_SEARCH_TERM = 'SET_SEARCH_TERM';\r\nexport const SET_CURRENT_PAGE = 'SET_CURRENT_PAGE';\r\n\r\nexport const fetchPhotosBegin = (loadMorePhotos) => ({\r\n    type: FETCH_PHOTOS_BEGIN,\r\n    loadMorePhotos\r\n});\r\n\r\nexport const fetchPhotosSuccess = ({ photosResp, loadMorePhotos }) => ({\r\n    type: FETCH_PHOTOS_SUCCESS,\r\n    payload: photosResp,\r\n    loadMorePhotos\r\n});\r\n\r\nexport const fetchPhotosFailure = (error) => ({\r\n    type: FETCH_PHOTOS_FAILURE,\r\n    payload: { error }\r\n});\r\n\r\nexport const fetchPhotos = (params) => {\r\n    let { currentPage, searchTerm } = params;\r\n    let textParam = searchTerm ? `&text=${searchTerm}` : '';\r\n    const currentUnixTimestamp = Math.round((new Date()).getTime() / 1000);\r\n\r\n    const fetchUrl = `${config.flickrSearchPhotosURL}${textParam}&max_upload_date=${currentUnixTimestamp}&safe_search=1&extras=tags%2Cdescription%2Cowner_name&page=${currentPage}&per_page=${config.resultsPerPage}&format=json&nojsoncallback=1`;\r\n    const loadMorePhotos = currentPage > 1;\r\n\r\n    return dispatch => {\r\n        dispatch(fetchPhotosBegin(loadMorePhotos));\r\n\r\n        return fetch(fetchUrl)\r\n            .then(handleErrors)\r\n            .then(res => res.json())\r\n            .then(json => {\r\n                return dispatch(fetchPhotosSuccess({ photosResp: json, loadMorePhotos }));\r\n            })\r\n            .catch(error => dispatch(fetchPhotosFailure(error)));\r\n    };\r\n}\r\n\r\nfunction handleErrors(response) {\r\n    if (!response.ok) {\r\n        throw Error(response.statusText);\r\n    }\r\n    return response;\r\n}\r\n\r\nexport const setSearchInputValue = value => ({\r\n    type: SET_SEARCH_INPUT_VALUE,\r\n    value\r\n});\r\n\r\nexport const setSearchTerm = value => ({\r\n    type: SET_SEARCH_TERM,\r\n    value\r\n});\r\n\r\nexport const setCurrentPage = value => ({\r\n    type: SET_CURRENT_PAGE,\r\n    value\r\n});\r\n","import { fromJS } from 'immutable';\r\n\r\nimport {\r\n\tFETCH_PHOTOS_BEGIN,\r\n\tFETCH_PHOTOS_SUCCESS,\r\n\tFETCH_PHOTOS_FAILURE,\r\n\tSET_SEARCH_INPUT_VALUE,\r\n\tSET_SEARCH_TERM,\r\n\tSET_CURRENT_PAGE\r\n} from './PhotoActions';\r\n\r\nconst initialState = fromJS({\r\n\tsearchInputValue: '',\r\n\tsearchTerm: '',\r\n\tcurrentPage: 1,\r\n\ttotalPages: 0,\r\n\tfetchPhotosLoading: false,\r\n\tfetchPhotosError: null,\r\n\tphotos: []\r\n});\r\n\r\nexport default (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase FETCH_PHOTOS_BEGIN: {\r\n\t\t\tconst photos = action.loadMorePhotos ? state.get('photos') : initialState.get('photos');\r\n\r\n\t\t\treturn state\r\n\t\t\t\t.set('fetchPhotosLoading', true)\r\n\t\t\t\t.set('fetchPhotosError', initialState.get('fetchPhotosError'))\r\n\t\t\t\t.set('photos', photos);\r\n\t\t}\r\n\t\tcase FETCH_PHOTOS_SUCCESS: {\r\n\t\t\tlet fetchedPhotos = [];\r\n\t\t\tlet totalPages = initialState.get('totalPages');\r\n\r\n\t\t\tif (action.payload && action.payload.photos) {\r\n\t\t\t\taction.payload.photos.photo && (fetchedPhotos = action.payload.photos.photo);\r\n\t\t\t\taction.payload.photos.pages && (totalPages = action.payload.photos.pages);\r\n\t\t\t}\r\n\r\n\t\t\tfetchedPhotos = fetchedPhotos.map(photo => {\r\n\t\t\t\tphoto.src = `https://farm${photo.farm}.staticflickr.com/${photo.server}/${photo.id}_${photo.secret}.jpg`\r\n\t\t\t\treturn photo;\r\n\t\t\t});\r\n\r\n\t\t\tlet photos = fetchedPhotos;\r\n\r\n\t\t\tif (action.loadMorePhotos) { // Load more photos (add to the existing photos)\r\n\t\t\t\tlet currentPhotos = state.get('photos').toJS();\r\n\r\n\t\t\t\tfor (let i = 0; i < fetchedPhotos.length; i++) { // Add only unique photos\r\n\t\t\t\t\tconst fetchedPhoto = fetchedPhotos[i];\r\n\t\t\t\t\tconst fetchedPhotoAlreadyExists = currentPhotos.find((photo) => photo.id === fetchedPhoto.id);\r\n\t\t\t\t\tif (!fetchedPhotoAlreadyExists) {\r\n\t\t\t\t\t\tcurrentPhotos.push(fetchedPhoto);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tphotos = [...currentPhotos];\r\n\t\t\t}\r\n\r\n\t\t\treturn state\r\n\t\t\t\t.set('fetchPhotosLoading', initialState.get('fetchPhotosLoading'))\r\n\t\t\t\t.set('photos', fromJS(photos))\r\n\t\t\t\t.set('totalPages', totalPages);\r\n\t\t}\r\n\t\tcase FETCH_PHOTOS_FAILURE: {\r\n\t\t\treturn state\r\n\t\t\t\t.set('fetchPhotosLoading', initialState.get('fetchPhotosLoading'))\r\n\t\t\t\t.set('fetchPhotosError', action.payload.error);\r\n\t\t}\r\n\t\tcase SET_SEARCH_INPUT_VALUE: {\r\n\t\t\treturn state.set('searchInputValue', action.value);\r\n\t\t}\r\n\t\tcase SET_SEARCH_TERM: {\r\n\t\t\treturn state.set('searchTerm', action.value);\r\n\t\t}\r\n\t\tcase SET_CURRENT_PAGE: {\r\n\t\t\treturn state.set('currentPage', action.value);\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import { createStore, combineReducers, applyMiddleware } from 'redux';\r\nimport photoReducer from '../photo/PhotoReducer';\r\nimport thunk from 'redux-thunk';\r\n\r\nconst reducers = combineReducers({\r\n\tphotosData: photoReducer\r\n});\r\n\r\nconst store = createStore(\r\n\treducers,\r\n\tapplyMiddleware(thunk)\r\n);\r\n\r\nexport default store;\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport {\r\n    fetchPhotos,\r\n    setSearchInputValue,\r\n    setSearchTerm,\r\n    setCurrentPage\r\n} from '../photo/PhotoActions';\r\n\r\nexport class PhotoSearchBar extends Component {\r\n    constructor() {\r\n        super();\r\n        this.searchPhotos = this.searchPhotos.bind(this);\r\n        this.handleSearchInputValueChange = this.handleSearchInputValueChange.bind(this);\r\n        this.handleKeyPress = this.handleKeyPress.bind(this);\r\n    }\r\n\r\n    handleSearchInputValueChange(e) {\r\n        this.props.setSearchInputValue(e.target.value);\r\n    }\r\n\r\n    handleKeyPress(e) {\r\n        if (e.key === 'Enter' && this.props.searchInputValue) {\r\n            this.searchPhotos();\r\n        }\r\n    }\r\n\r\n    searchPhotos() {\r\n        let { setCurrentPage, setSearchTerm, searchInputValue, fetchPhotos } = this.props;\r\n        const newSearchTerm = searchInputValue.trim();\r\n        setSearchTerm(newSearchTerm);\r\n        setCurrentPage(1);\r\n        fetchPhotos({ currentPage: 1, searchTerm: newSearchTerm });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"header--search-bar\">\r\n                <input type=\"text\" value={this.props.searchInputValue} onChange={this.handleSearchInputValueChange} onKeyPress={this.handleKeyPress} placeholder=\"Search in title, description and tags...\" />\r\n                <button onClick={this.searchPhotos} disabled={!this.props.searchInputValue}></button>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nPhotoSearchBar.propTypes = {\r\n    fetchPhotos: PropTypes.func,\r\n    searchTerm: PropTypes.string,\r\n    setSearchTerm: PropTypes.func,\r\n    setCurrentPage: PropTypes.func,\r\n    currentPage: PropTypes.number\r\n};\r\n\r\nconst mapStateToProps = ({ photosData }) => {\r\n    return {\r\n        searchInputValue: photosData.get('searchInputValue'),\r\n        searchTerm: photosData.get('searchTerm'),\r\n        currentPage: photosData.get('currentPage')\r\n    };\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        fetchPhotos: dataUrl => dispatch(fetchPhotos(dataUrl)),\r\n        setSearchInputValue: value => dispatch(setSearchInputValue(value)),\r\n        setSearchTerm: value => dispatch(setSearchTerm(value)),\r\n        setCurrentPage: value => dispatch(setCurrentPage(value))\r\n    };\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(PhotoSearchBar);\r\n","import { createBrowserHistory } from 'history';\r\n\r\nexport default createBrowserHistory();\r\n","import React from 'react';\r\nimport PhotoSearchBar from '../photo/PhotoSearchBar';\r\nimport history from '../app/history';\r\nimport './Header.css';\r\n\r\nconst HOME_PATH = '/';\r\n\r\nconst Header = ({ currentPath }) => {\r\n\tfunction loadHomePage() {\r\n\t\tif (currentPath !== HOME_PATH) {\r\n\t\t\thistory.push(HOME_PATH);\r\n\t\t} else {\r\n\t\t\twindow.location.reload();\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<header className=\"header\">\r\n\t\t\t<h1 className=\"header--title\" onClick={loadHomePage}>Flickr Photos</h1>\r\n\t\t\t<PhotoSearchBar />\r\n\t\t</header>\r\n\t);\r\n}\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport { config } from '../config';\r\n\r\nconst MAX_TITLE_LENGTH = 20;\r\nconst MAX_DESCRIPTION_LENGTH = 40;\r\nconst MAX_TAGS_COUNT = 5;\r\n\r\nconst Photo = ({ data }) => {\r\n    const linkToOriginalPhoto = `${config.flickrURL}/photos/${data.owner}/${data.id}`;\r\n    const linkToAuthorPage = `${config.flickrURL}/people/${data.owner}`;\r\n\r\n    const shownTitle = data.title.length > MAX_TITLE_LENGTH ? data.title.substr(0, MAX_TITLE_LENGTH) + '...' : data.title;\r\n    const fullDescription = data.description && data.description._content && data.description._content.trim();\r\n    let shownDescription = '';\r\n\r\n    if (fullDescription) {\r\n        shownDescription = fullDescription.length > MAX_DESCRIPTION_LENGTH ? fullDescription.substr(0, MAX_DESCRIPTION_LENGTH) + '...' : fullDescription;\r\n    }\r\n\r\n    let allTags = [];\r\n    data.tags && (allTags = data.tags.split(' '));\r\n    let shownTagsAsText = allTags.length > MAX_TAGS_COUNT ? allTags.slice(0, MAX_TAGS_COUNT).join(', ') + '...' : [...allTags].join(', ');\r\n\r\n    return (\r\n        <div className=\"photos-list--card\">\r\n            <a href={linkToOriginalPhoto} target=\"_blank\" rel=\"noopener noreferrer\" title={data.title}>\r\n                <img src={data.src} alt=\"\" className=\"photo-list--card--image\" />\r\n            </a>\r\n            <a href={linkToOriginalPhoto} target=\"_blank\" rel=\"noopener noreferrer\" title={data.title}>\r\n                {shownTitle}\r\n            </a>\r\n            <span> by </span>\r\n            <a href={linkToAuthorPage} target=\"_blank\" rel=\"noopener noreferrer\">{data.ownername}</a>\r\n            {\r\n                shownDescription &&\r\n                <p className=\"photo-list--card--description\" title={fullDescription}>\r\n                    {`Description: ${shownDescription}`}\r\n                </p>\r\n            }\r\n            {shownTagsAsText.length > 0 && <div title={allTags.join(', ')}>Tags: {shownTagsAsText}</div>}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Photo;\r\n","import React from 'react';\r\nimport loading from '../images/flickr-loading.svg';\r\nimport './Loading.css';\r\n\r\nconst Loading = () => {\r\n    return (\r\n        <div className=\"loading\">\r\n            <img src={loading} alt=\"Loading...\" className=\"loading-img\" />\r\n            <div>Loading...</div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Loading;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport Photo from './Photo';\r\nimport './Photo.css';\r\nimport Loading from '../loading/Loading';\r\nimport LazyLoad from 'react-lazyload';\r\n\r\nimport {\r\n\tfetchPhotos,\r\n\tsetCurrentPage\r\n} from '../photo/PhotoActions';\r\n\r\nexport class PhotoList extends Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\twindow.onscroll = () => {\r\n\t\t\tlet { setCurrentPage, fetchPhotos, currentPage, searchTerm, totalPages } = this.props;\r\n\r\n\t\t\tif (window.innerHeight + document.documentElement.scrollTop === document.documentElement.offsetHeight) {\r\n\t\t\t\tif (totalPages === currentPage) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetCurrentPage(currentPage + 1);\r\n\t\t\t\tfetchPhotos({ currentPage: currentPage + 1, searchTerm });\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tlet { fetchPhotos, searchTerm } = this.props;\r\n\t\tfetchPhotos({ currentPage: 1, searchTerm });\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { photos, fetchPhotosLoading, fetchPhotosError, searchTerm, currentPage, totalPages } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<main>\r\n\t\t\t\t{searchTerm && photos.length > 0 && !fetchPhotosLoading && <div className=\"results-for\">Results for \"{searchTerm}\"</div>}\r\n\t\t\t\t<div className=\"photos-list\">\r\n\t\t\t\t\t{photos.length === 0 && !fetchPhotosLoading ? <div className=\"photo-list--no-results\">No results found for \"{searchTerm}\"</div> : ''}\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tphotos.map(photo => (\r\n\t\t\t\t\t\t\t<LazyLoad key={photo.id} height={300}>\r\n\t\t\t\t\t\t\t\t<Photo data={photo} />\r\n\t\t\t\t\t\t\t</LazyLoad>\r\n\t\t\t\t\t\t))\r\n\t\t\t\t\t}\r\n\t\t\t\t\t{fetchPhotosLoading && <Loading />}\r\n\t\t\t\t\t{fetchPhotosError && <div className=\"photo-list--error-message\">Error! {fetchPhotosError.message}</div>}\r\n\t\t\t\t\t{totalPages === currentPage && !fetchPhotosLoading && <div className=\"photo-list--no-results\">No more results!</div>}\r\n\t\t\t\t</div>\r\n\t\t\t</main>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nPhotoList.propTypes = {\r\n\tfetchPhotos: PropTypes.func,\r\n\tfetchPhotosLoading: PropTypes.bool,\r\n\tfetchPhotosError: PropTypes.string,\r\n\tphotos: PropTypes.array,\r\n\tsearchTerm: PropTypes.string,\r\n\tcurrentPage: PropTypes.number,\r\n\ttotalPages: PropTypes.number\r\n};\r\n\r\nconst mapStateToProps = ({ photosData }) => {\r\n\treturn {\r\n\t\tfetchPhotosLoading: photosData.get('fetchPhotosLoading'),\r\n\t\tfetchPhotosError: photosData.get('fetchPhotosError'),\r\n\t\tphotos: photosData.get('photos').toJS(),\r\n\t\tsearchTerm: photosData.get('searchTerm'),\r\n\t\tcurrentPage: photosData.get('currentPage'),\r\n\t\ttotalPages: photosData.get('totalPages')\r\n\t};\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn {\r\n\t\tfetchPhotos: params => dispatch(fetchPhotos(params)),\r\n\t\tsetCurrentPage: value => dispatch(setCurrentPage(value))\r\n\t};\r\n};\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(PhotoList);\r\n","import React, { Component } from 'react';\nimport Header from '../header/Header';\nimport PhotoList from '../photo/PhotoList';\n\nclass App extends Component {\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"app\">\n\t\t\t\t<Header currentPath={this.props.location.pathname}/>\n\t\t\t\t<PhotoList />\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { Provider } from 'react-redux';\nimport store from './app/store';\nimport AppRoutes from './app/routes';\n\nReactDOM.render(\n\t<Provider store={store}>\n\t\t<AppRoutes />\n\t</Provider>,\n\tdocument.getElementById('root')\n);\n","import React from 'react';\r\nimport { Router, Route, Switch } from 'react-router-dom';\r\nimport App from './App';\r\nimport history from './history';\r\n\r\nexport default () => {\r\n\treturn (\r\n\t\t<Router basename={process.env.PUBLIC_URL} history={history}>\r\n\t\t\t<Switch>\r\n\t\t\t\t<Route exact path=\"/\" component={App} />\r\n\t\t\t</Switch>\r\n\t\t</Router>\r\n\t);\r\n};\r\n"],"sourceRoot":""}